{"version":3,"sources":["cube.js"],"names":["cc","Class","extends","Component","properties","level","state","default","Normal","type","cell","p","levelFrames","SpriteFrame","background","Sprite","onLoad","node","on","Node","EventType","TOUCH_START","onTouchStart","TOUCH_MOVE","onTouchMove","TOUCH_CANCEL","onTouchEnd","TOUCH_END","onLevelUp","onMoveUp","touchStartPos","gameManager","levelChange","safeChangeLevelFrame","playDeadAction","position","playBombSound","length","spriteFrame","init","start","setCellPos","setState","log","js","formatStr","Bombing","error","cubeMoved","TouchMove","Touched","FallingDown","activePhysics","FallingBottom","update","dt","removeCube","disablePhysics","checkFallingDown","resetY","y","height","space","touch","getLocation","parent","emit","resetX","dis","pDistance","pSub","checkBombing","cube1","cube2","onBeginContact","contact","selfCollider","otherCollider","body","RigidBodyType","Static","cubeSelf","getComponent","cubeOther","onPostSolve","posToPoint","rowPositions","row","x","columnPositions","column","toString","RigidBody","awake","Dynamic","downCube","getCube","Block","moveTo","pAdd","runAction","sequence","callFunc"],"mappings":"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","file":"cube.js","sourceRoot":"../../../../../assets/Script/prefab","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n// import {CubeState} from './color-cube';\nimport {CubeState} from \"../consts\";\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    level: 0,\n    state:{\n      default:CubeState.Normal,\n      type:CubeState\n    },\n    cell:cc.p(0,0),\n    levelFrames:[cc.SpriteFrame],\n    background:cc.Sprite,\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad() {\n    this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this);\n    this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this);\n    // this.gameNode = cc.find(\"/Canvas/game-node\", cc.director.getRunningScene());\n    this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this);\n    this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this);\n\n    this.node.on(\"level-up\",this.onLevelUp,this);\n\n    this.node.on(\"move-up\",this.onMoveUp,this);\n\n    this.touchStartPos=cc.p(0,0);\n  },\n\n  // destroy(){\n  //   this.gameNode.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this);\n  // },\n\n  onLevelUp(){\n    this.level++;\n    gameManager.levelChange(this.level);\n    this.safeChangeLevelFrame();\n    gameManager.playDeadAction(this.node.position);\n    gameManager.playBombSound();\n  },\n\n  safeChangeLevelFrame(){\n    if (this.level>=this.levelFrames.length){\n      this.level=this.levelFrames.length-1;\n    }\n    this.background.spriteFrame=this.levelFrames[this.level];\n  },\n\n  init(cell,level) {\n    this.cell=cell;\n    this.level=level;\n    // this.\n    this.safeChangeLevelFrame();\n    // this.setState(CubeState.Block);\n  },\n\n  start() {\n\n  },\n\n  setCellPos(cell){\n    this.cell=cell;\n  },\n\n  setState(state) {\n    cc.log(cc.js.formatStr(\"set state,old:%d,new:%d,pos:%v\",this.state,state,this.cell));\n    if (this.state===CubeState.Bombing){\n      cc.error(\"cube is marking dead\");\n      return;\n    }\n    if (this.state===state){\n      return;\n    }\n    switch (state){\n      case CubeState.Normal:{\n        gameManager.cubeMoved(this.node);\n        break;\n      }\n      case CubeState.TouchMove:{\n        break;\n      }\n      case CubeState.Touched:\n      case CubeState.FallingDown:{\n        this.activePhysics();\n        // this.resetX();\n      }\n      case CubeState.FallingBottom:{\n        break;\n      }\n    }\n    this.state=state;\n  },\n\n  update(dt) {\n    switch (this.state){\n      case CubeState.Bombing:{\n        gameManager.removeCube(this.node);\n        break;\n      }\n      case CubeState.TouchMove:{\n        break;\n      }\n      case CubeState.Normal:{\n        this.disablePhysics();\n        this.checkFallingDown();\n        break;\n      }\n      case CubeState.FallingBottom:{\n        this.resetY();\n        this.setState(CubeState.Normal);\n        break;\n      }\n    }\n    //非touch状态时进行触底检查\n    if (this.state!==CubeState.Touched&&this.state!==CubeState.TouchMove){\n      if (this.node.y<this.node.height/2+gameManager.space){\n        this.setState(CubeState.FallingBottom);\n      }\n    }\n  },\n\n  onTouchStart(touch){\n    cc.log(\"on touch start\");\n    this.setState(CubeState.Touched);\n    // let body=this.node.getComponent(cc.RigidBody);\n    // body.awake=true;\n    // body.type=cc.RigidBodyType.Dynamic;\n\n    this.activePhysics();\n    this.touchStartPos=touch.getLocation();\n  },\n\n  onTouchEnd(touch){\n    cc.log(\"on touch end\");\n    this.node.parent.emit(cc.Node.EventType.TOUCH_END);   //告知touch关节触摸结束\n    if (this.state!==CubeState.Touched&&this.state!==CubeState.TouchMove){\n      return;\n    }\n    //重置mouse关节的冲量\n    this.disablePhysics();\n    this.setState(CubeState.FallingDown);\n    this.resetX();\n\n    this.touchStartPos=cc.p(0,0);\n  },\n\n  onTouchMove(touch){\n    cc.log(\"on touch moved\");\n    let dis=cc.pDistance(cc.pSub(touch.getLocation(),this.touchStartPos),cc.p(0,0));\n    if (dis>3){\n      if (this.state===CubeState.Touched){\n        this.setState(CubeState.TouchMove);\n        // gameManager.cubeMove(this.cell);\n\n      }\n    }\n  },\n\n  checkBombing(cube1,cube2){\n    if (cube1.level !== cube2.level) {\n      return false;\n    }\n\n    if (cube1.state === CubeState.Bombing) {\n      return false;\n    }\n\n    if (cube1.state===CubeState.TouchMove||cube1.state===CubeState.FallingDown){\n      return true;\n    }\n    return false;\n  },\n\n  //仅动态类型才处理碰撞\n  onBeginContact: function (contact, selfCollider, otherCollider) {\n    if (selfCollider.body.type===cc.RigidBodyType.Static){\n      return;\n    }\n\n    let cubeSelf=selfCollider.node.getComponent(\"cube\");\n    let cubeOther=otherCollider.getComponent(\"cube\");\n    if (!cubeSelf||!cubeOther){\n      return;\n    }\n\n    if (this.checkBombing(cubeSelf,cubeOther)){\n      cubeSelf.setState(CubeState.Bombing);\n      cubeOther.node.emit(\"level-up\");\n    }\n\n    if (cubeSelf.state===CubeState.FallingDown){\n      cubeSelf.setState(CubeState.FallingBottom);\n    }\n  },\n  // 每次处理完碰撞体接触逻辑时被调用\n  onPostSolve: function (contact, selfCollider, otherCollider) {\n    if (selfCollider.body.type===cc.RigidBodyType.Static){\n      return;\n    }\n  },\n\n  // 每次处理完碰撞体接触逻辑时被调用\n  onPostSolve: function (contact, selfCollider, otherCollider) {\n    if (selfCollider.body.type===cc.RigidBodyType.Static){\n      return;\n    }\n  },\n  resetY(){\n    //更新cube的y坐标\n    cc.log(\"reset y called\");\n    let cell=gameManager.posToPoint(this.node.position);\n    this.node.y=gameManager.rowPositions[cell.row];\n  },\n  resetX(){\n    //更新cube的x坐标\n    cc.log(\"reset x called\");\n    let cell=gameManager.posToPoint(this.node.position);\n    this.node.x=gameManager.columnPositions[cell.column];\n    cc.log(\"reset x,new x:\"+this.node.x.toString());\n  },\n\n  activePhysics(){\n    let body=this.node.getComponent(cc.RigidBody);\n    body.awake=true;\n    body.type=cc.RigidBodyType.Dynamic;\n  },\n\n  disablePhysics(){\n    let body=this.node.getComponent(cc.RigidBody);\n    if (body.type!==cc.RigidBodyType.Static){\n      body.type=cc.RigidBodyType.Static;\n    }\n  },\n\n  checkFallingDown(){\n    if (this.cell.row<=0){\n      return;\n    }\n    let downCube=gameManager.getCube(this.cell.row-1,this.cell.column);\n    if (!downCube){\n      this.setState(CubeState.FallingDown);\n    }\n  },\n  onMoveUp(){\n    this.setState(CubeState.Block);\n    let moveTo=cc.moveTo(0.2,cc.pAdd(this.node.position,cc.p(0,this.node.height+gameManager.space)));\n    this.node.runAction(cc.sequence(moveTo,cc.callFunc(()=>{\n      gameManager.cubeMoved(this.node);\n      this.setState(CubeState.Normal);\n    })));\n  },\n});\n"]}